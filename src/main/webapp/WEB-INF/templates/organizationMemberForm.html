<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>New Project</title>
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript">
	/*<![CDATA[*/
	$(function() {
		$("#search").autocomplete({
			source : function(request, response) {
				$.ajax({
					url : "new/searchMembers",
					dataType : 'json',
					data : request,
					success : function(data) {
						if (typeof Array.prototype.forEach != 'function') {
							Array.prototype.forEach = function(callback) {
								for (var i = 0; i < this.length; i++) {
									callback.apply(this, [ this[i], i, this ]);
								}
							};
						}

						var values = data;
						var newArray = new Array(values.length);
						var i = 0;
						values.forEach(function(entry) {
							var newObject = {
								label : entry.email
							};
							newArray[i] = newObject;
							i++;
						});

						response(newArray);
					}
				});
			},
			minLength : 1
		});
	});
	/*]]>*/
</script>
 
  <link href="../../../resources/css/bootstrap.min.css" rel="stylesheet"
    media="screen" th:href="@{/resources/css/bootstrap.min.css}" />
<style>
body {
	padding-top: 100px;
	padding-left: 100px;
}
</style>
</head>
</head>
<body>
  <div th:include="fragments/header"></div>

	 <div>Add a new member to this organization</div>
	 <br/>
	<form action="#" th:action="@{/{organizationName}/members/new(organizationName=${organizationName})}" th:object="${user}" method="post">
	   <input type="text" th:field="*{email}" placeholder="Email" id="search" />
	   <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Invalid Email</span>
	   <br/>
	   <input type="submit" value="Add"/>
	</form>

</body>
</html>